[information]
name = {{.Values.sspServerName}}
description = Web Interface for {{ if .Values.sspServerName }}{{.Values.sspServerName}}{{ else }}Sugarizer School Portal{{ end }}

[web]
port = 8080

[security]
min_password_size = {{ if .Values.security.minPassSize}}{{.Values.security.minPassSize}}{{ else }}4{{ end }}
max_age = {{ if .Values.security.maxAge}}{{.Values.security.maxAge}}{{ else }}172800000{{ end }}
max_age_TFA = {{ if .Values.security.maxAge}}{{.Values.security.maxAge}}{{ else }}180000{{ end }}
service_name = {{ if .Values.security.serviceName}}{{.Values.security.serviceName}}{{ else }}SchoolPortal{{ end }}
secret = {{ if .Values.security.secret}}{{.Values.security.secret}}{{ else }}super.sugarizer.schoolportal.key{{ end }}
https = false
certificate_file = ../server.crt
key_file = ../server.key
strict_ssl = false
salt_rounds = 10
verification = {{.Values.verification.enabled}}
{{- if eq .Values.verification.enabled true}}
smtp_port = {{ if .Values.verification.smtpPort }}{{.Values.verification.smtpPort}}{{ else }}false{{ end }}
smtp_host = {{ if .Values.verification.smtpHost }}{{.Values.verification.smtpHost}}{{ else }}false{{ end }}
smtp_tls_secure = {{ if .Values.verification.smtpTlsSsecure }}{{.Values.verification.smtpTlsSsecure}}{{ else }}false{{ end }}
smtp_user = {{ if .Values.verification.smtpUser }}{{.Values.verification.smtpUser}}{{ else }}false{{ end }}
smtp_pass = {{ if .Values.verification.smtpPass }}{{.Values.verification.smtpPass}}{{ else }}false{{ end }}
smtp_email = {{ if .Values.verification.smtpEmail }}{{.Values.verification.smtpEmail}}{{ else }}false{{ end }}
{{- end }}

[database]
server = {{ if .Values.database.replicaset }}{{.Values.database.databaseUrl}}-0.{{.Values.database.databaseUrl}}-headless.default.svc.cluster.local:27017,{{.Values.database.databaseUrl}}-1.{{.Values.database.databaseUrl}}-headless.default.svc.cluster.local:27017,{{.Values.database.databaseUrl}}-2.{{.Values.database.databaseUrl}}-headless.default.svc.cluster.local:27017{{ else }}{{.Values.database.databaseUrl}}{{ end }}
port = 27017
name = {{.Values.sspNamespace}}
waitdb = 1
replicaset = {{.Values.database.replicaset}}

[collections]
users = users
deployments = deployments

[system]
helm_binary = helm
kubectl_binary = kubectl
chart_path = ../sugarizer-chart/
replicaset = {{.Values.database.replicaset}}
databaseUrl = {{.Values.database.databaseUrl}}
hostName = {{.Values.deployment.host}}

[log]
level = 1

[webhooks]
slack_webhook_url = {{ if .Values.webhook.slackWebhookUrl }}{{.Values.webhook.slackWebhookUrl}}{{ else }}false{{ end }}
